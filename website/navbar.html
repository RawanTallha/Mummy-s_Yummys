<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nav</title>
    <link rel="stylesheet" href="CSS/navbar.css">
</head>

<body>
    <nav class="custom-navbar">

        <!-- Rightmost: Logo -->
        <div class="nav-right">
            <a href="#Home"><img src="assets/initial-logo.png" alt="Mummy's Yummy's logo"></a>
        </div>

        <!-- Center: Links -->
        <div class="nav-center">
            <a href="index.html">الرئيسية</a>
            <a href="explore.html">وصفات</a>
            <a href="about-us.html">من نحن</a>
            <a href="contact.html">تواصل معنا</a>
        </div>


        <!-- Leftmost: Buttons -->
        <div class="nav-left">
            <div class="search-container">

                <a href="profile.html" class="custom-navbar-button">
                    <i class="fa-solid fa-user"></i>
                </a>
            </div>
            <div class="login-container">
                <a href="login.html" class="custom-navbar-button">
                <i class="fa-solid fa-arrow-right-to-bracket"></i>
            </a>
            </div>
        </div>
    </nav>
    <script>
        window.addEventListener("DOMContentLoaded", async () => {
            const loginButton = document.querySelector(".login-container a");
            const profileButton = document.querySelector(".search-container a");

            try {
                const res = await fetch("/api/session");
                const data = await res.json();

                if (data.loggedIn) {
                    loginButton.href = "/profile.html";
                    loginButton.innerHTML = `<i class="fa-solid fa-user"></i>`;
                    profileButton.style.display = "none"; // optional: hide duplicate profile icon
                } else {
                    loginButton.href = "/login.html";
                    loginButton.innerHTML = `<i class="fa-solid fa-arrow-right-to-bracket"></i>`;
                }
            } catch (err) {
                console.error("Session check failed:", err);
            }
        });
    </script>

</body>

</html>